{
  "name": "@posey.ai/auth",
  "version": "1.0.0-beta.2",
  "packageManager": "yarn@4.7.0",
  "scripts": {
    "dev": "nodemon --exec node --require ts-node/register src/main.ts",
    "dev:node": "NODE_ENV=development",
    "build": "tsc",
    "start:container": "scripts/run-migrations.sh && NODE_PATH=./src node --require ts-node/register --no-warnings src/main.ts",
    "start": "docker compose up -d",
    "docker:build": "docker build -t registry.digitalocean.com/posey/posey-auth:latest -f Dockerfile ../..",
    "docker:push": "docker push registry.digitalocean.com/posey/posey-auth:latest",
    "docker:start": "docker run -p 9999:9999 registry.digitalocean.com/posey/posey-auth:latest",
    "docker:stop": "docker stop $(docker ps -q --filter ancestor=registry.digitalocean.com/posey/posey-auth:latest)",
    "build:docker": "npm run docker:build && npm run docker:push",
    "build:local": "echo 'üî® Building Docker image posey-auth:latest...' && docker build -t posey-auth:latest -f Dockerfile ../.. && docker images posey-auth:latest",
    "k8s:check": "kubectl cluster-info > /dev/null 2>&1 || (echo 'Error: Kubernetes cluster not accessible. Please ensure:'; echo '1. Kubernetes is running (minikube, kind, etc.)'; echo '2. kubectl is configured correctly'; echo '3. Your VPN is connected if using a remote cluster'; exit 1)",
    "deploy": "bash ../../scripts/k8s-deploy.sh auth",
    "deploy:local": "npm run build:local && npm run k8s:check && kubectl apply -f ./k8s/auth-pvc.yaml -n posey && kubectl apply -f ./k8s/service.yaml -n posey && kubectl apply -f ./k8s/deployment-local.yaml -n posey",
    "verify": "kubectl get pods -n posey -l app=posey-auth && kubectl get services -n posey -l app=posey-auth",
    "debug": "echo 'üîç Checking Docker images:' && docker images | grep auth && echo 'üîç Checking Kubernetes pods:' && kubectl get pods -n posey -l app=posey-auth -o wide && echo 'üîç Checking pod details:' && kubectl describe pod -n posey -l app=posey-auth || echo 'No pods found' && echo 'üîç Checking PVC status:' && kubectl get pvc -n posey | grep auth && echo 'üîç Checking Kubernetes events:' && kubectl get events -n posey --sort-by=.metadata.creationTimestamp | tail -n 15",
    "clean": "npm run k8s:check && kubectl delete -f ./k8s/ -n posey --ignore-not-found",
    "connect": "echo 'Auth service is available at: http://localhost:9999 (when port-forwarded)' && echo 'To port-forward: kubectl port-forward service/posey-auth 9999:9999 -n posey'",
    "port-forward": "kubectl port-forward service/posey-auth 9999:9999 -n posey",
    "redeploy": "npm run clean && npm run deploy:local"
  },
  "dependencies": {
    "@aws-sdk/client-s3": "^3.744.0",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "pg": "^8.13.3",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "supertokens-auth-react": "^0.48.0",
    "supertokens-node": "^16.6.0",
    "supertokens-web-js": "^0.14.0"
  },
  "devDependencies": {
    "@types/cors": "^2.8.17",
    "@types/express": "^4.17.21",
    "@types/node": "^22.13.5",
    "@types/pg": "^8.11.11",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9.22.0",
    "nodemon": "^3.1.9",
    "ts-node": "^10.9.2",
    "typescript": "^5.7.3"
  }
}
