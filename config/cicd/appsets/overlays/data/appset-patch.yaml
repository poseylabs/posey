# /cicd/appsets/overlays/data/appset-patch.yaml
# Patch specific fields in the base ApplicationSet for data services
apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  # Target the base name
  name: posey-appset-base 
spec:
  generators:
  - git:
      # Only patch the directory path here
      directories:
      - path: k8s/charts/data/* # Point to data charts directory
  template:
    metadata:
      # Set the correct name for the generated application
      name: posey-data-services # Keep this name override
      labels:
        # Set the correct labels
        argocd.argoproj.io/applicationset: posey-data-services
        category: data
    # No source override needed here anymore, it's handled by the base template
    # spec:
    #   syncPolicy: # Example: Uncomment to patch syncPolicy if needed
    #     automated:
    #       prune: false