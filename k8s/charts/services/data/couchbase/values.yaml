replicaCount: 1

image:
  repository: poseylabs/posey-couchbase
  pullPolicy: Always
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: "posey-couchbase"

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  ports:
    - name: http-ui
      port: 8091
      targetPort: 8091
    - name: capi
      port: 8092
      targetPort: 8092
    - name: query-n1ql
      port: 8093
      targetPort: 8093
    - name: fts
      port: 8094
      targetPort: 8094
    - name: data-service
      port: 11210
      targetPort: 11210

ingress:
  enabled: false # Typically false for databases, expose via Service if needed externally

resources: {}
  # limits:
  #   cpu: 2000m
  #   memory: 4Gi
  # requests:
  #   cpu: 1000m
  #   memory: 2Gi

autoscaling:
  enabled: false # StatefulSets usually don't autoscale well without an operator

# Couchbase typically uses a StatefulSet for stable network identifiers and storage
# We'll need to create the StatefulSet template separately.
# This values.yaml will configure aspects of it.

statefulSet:
  # Annotations for the StatefulSet itself
  annotations: {}
  # Labels for the StatefulSet itself
  labels: {}
  # Update strategy for the StatefulSet
  updateStrategy:
    type: RollingUpdate
    # rollingUpdate:
    #   partition: 0 # Controls staged rollouts

persistence:
  enabled: true
  storageClassName: "standard-rwo" # Matching postgres
  accessMode: ReadWriteOnce
  size: 20Gi # Adjust based on expected data volume
  mountPath: /opt/couchbase/var # Default Couchbase data path

# Couchbase specific configuration
# Passed via environment variables. Check your image documentation for exact variable names.
config:
  clusterName: posey-couchbase
  # services: data,index,query,fts # Services to enable on nodes (can often be set via env var)


adminCredentials:
  # If envFromSecret is enabled and the secret contains the admin creds,
  # secretName might not be needed here. Otherwise, specify the secret name.
  secretName: posey-prod-data-env-vars
  usernameKey: COUCHBASE_USER # Key name matches the variable in .env
  passwordKey: COUCHBASE_PASSWORD # Key name matches the variable in .env

# Additional volumes for the StatefulSet pods
volumes: []

# Additional volumeMounts for the StatefulSet pods
volumeMounts: []

nodeSelector: {}

tolerations: []

affinity: {} 

global:
  partOf: posey
  image:
    registry: docker.io
    pullPolicy: Always
  resources:
    limits:
      cpu: "1"
      memory: "2Gi"
    requests:
      cpu: "500m"
      memory: "1Gi"
  replicaCount: 1