# /k8s/data/postgres/postgres-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: postgres
  # namespace: posey # Let ArgoCD/Kustomize handle namespace
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/part-of: posey-data
spec:
  ports:
  - port: 5432 # Standard Postgres port
    targetPort: 5432 # Port the container listens on (defined in Dockerfile or Postgres default)
    # targetPort: 3333 # Use if your Dockerfile EXPOSEs/runs on 3333
    protocol: TCP
    name: tcp-postgres
  # Use ClusterIP for internal-only access
  type: ClusterIP
  # Selects the pods managed by the StatefulSet
  selector:
    app.kubernetes.io/name: postgres 